/* apps/firetrackpro/public/css/custom.css */

/* ========= Brand utilities (kept from your original) ========= */
.bg-primary     { background-color: #E53E3E !important; }
.text-primary   { color: #E53E3E !important; }
.bg-secondary   { background-color: #2B6CB0 !important; }
.text-secondary { color: #2B6CB0 !important; }
.bg-accent      { background-color: #F6AD55 !important; }
.text-accent    { color: #F6AD55 !important; }

/* ========= Portal rounding + components pack (scoped) ========= */
/* Set default radius just for portal shell */
.portal-shell { --ftp-radius: .75rem; }

/* Give a rounded default to common controls,
   but RESPECT any explicit Tailwind rounded/rounded-* classes */
.portal-shell :where(
  button, .btn, .view-btn, .calendar-today, .calendar-prev, .calendar-next,
  input[type="text"], input[type="search"], input[type="email"], input[type="number"], textarea,
  select,
  .sidebar-link, .submenu-toggle,
  .external-task, .context-menu, .modal-card
):not(.rounded):not([class*="rounded-"]) {
  border-radius: var(--ftp-radius);
}

/* Pills stay pill */
.portal-shell .rounded-full,
.portal-shell [class*="rounded-full"] { border-radius: 9999px !important; }

/* Subtle ring focus for inputs/selects when not using Tailwind utilities */
.portal-shell input[type="text"],
.portal-shell input[type="search"],
.portal-shell input[type="email"],
.portal-shell input[type="number"],
.portal-shell textarea,
.portal-shell select {
  outline: none;
  transition: box-shadow .15s ease, border-color .15s ease;
}
.portal-shell input[type="text"]:focus,
.portal-shell input[type="search"]:focus,
.portal-shell input[type="email"]:focus,
.portal-shell input[type="number"]:focus,
.portal-shell textarea:focus,
.portal-shell select:focus {
  box-shadow: 0 0 0 2px rgba(59,130,246,.4); /* ~blue-500/40 */
}

/* ---------- FullCalendar rounding ---------- */
.portal-shell .fc .fc-button        { border-radius: var(--ftp-radius); }
.portal-shell .fc .fc-event,
.portal-shell .fc .fc-v-event,
.portal-shell .fc .fc-h-event       { border-radius: var(--ftp-radius); overflow: hidden; }
.portal-shell .fc .fc-popover       { border-radius: var(--ftp-radius); }

/* Horizontal scroller visible when timeline overflows */
.portal-shell #calendar .fc-scroller { overflow: auto !important; }

/* ---------- Context menu ---------- */
.portal-shell .context-menu {
  position: absolute;
  z-index: 60;
  background: #fff;
  border: 1px solid #e5e7eb;            /* gray-200 */
  border-radius: var(--ftp-radius);
  box-shadow: 0 10px 15px -3px rgba(0,0,0,.1), 0 4px 6px -4px rgba(0,0,0,.1);
  min-width: 180px;
}
.portal-shell .context-menu-list {
  list-style: none; margin: 0; padding: 6px;
}
.portal-shell .context-menu-list li {
  padding: 8px 10px; font-size: 14px; border-radius: .5rem; cursor: pointer;
}
.portal-shell .context-menu-list li:hover { background: #f3f4f6; } /* gray-100 */

/* ---------- Modal ---------- */
.portal-shell .modal { position: fixed; inset: 0; z-index: 70; display: none; }
.portal-shell .modal.open { display: flex; }
.portal-shell .modal-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,.4); }
.portal-shell .modal-card {
  position: relative; margin: auto; width: 100%; max-width: 720px; background: #fff;
  border-radius: var(--ftp-radius);
  box-shadow: 0 25px 50px -12px rgba(0,0,0,.25);
}

/* ---------- Tech chips ensure-pill ---------- */
.portal-shell #selected_tech_chips button { border-radius: 9999px; }

/* ========= Optional: hide default website/footer blocks inside portal ========= */
/* If a theme injects a footer container, nuke it inside the portal shell only. */
.portal-shell .web-footer,
.portal-shell .website-footer,
.portal-shell .page-footer,
.portal-shell .footer,
.portal-shell footer.site-footer {
  display: none !important;
}

/* ========= Minor utilities ========= */
/* Smooth scrollbar thumb (kept from base) – safe to duplicate */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-thumb { background: #818cf8; border-radius: 6px; }


/* ========= Sidebar compact sizing (desktop + mobile) ========= */
.portal-shell nav#sidebar-desktop,
.portal-shell nav#mobile-sidebar {
  /* Easy knobs to tweak size */
  --sb-pad-y: .375rem;      /* ~6px vertical */
  --sb-pad-x: .5rem;        /* ~8px horizontal */
  --sb-gap: .5rem;          /* icon/label gap */
  --sb-font: .875rem;       /* 14px text */
  --sb-icon: 18px;          /* icon size */
  --sb-sub-indent: .75rem;  /* submenu indent */
}

/* Links + submenu toggle buttons smaller */
.portal-shell .sidebar-link,
.portal-shell .submenu-toggle {
  padding: var(--sb-pad-y) var(--sb-pad-x);
  gap: var(--sb-gap);
  font-size: var(--sb-font);
  border-radius: .5rem; /* still rounded */
  line-height: 1.1;
}

/* Make submenu items smaller + reduce indent (overrides Tailwind pl-6) */
.portal-shell nav .submenu {
  padding-left: var(--sb-sub-indent) !important;
}
.portal-shell nav .submenu .sidebar-link {
  padding-top: calc(var(--sb-pad-y) - 1px);
  padding-bottom: calc(var(--sb-pad-y) - 1px);
  font-size: .8125rem; /* 13px for nested items */
}

/* Shrink Feather icons that get injected as SVGs */
.portal-shell nav#sidebar-desktop .sidebar-link svg,
.portal-shell nav#sidebar-desktop .submenu-toggle svg,
.portal-shell nav#mobile-sidebar   .sidebar-link svg,
.portal-shell nav#mobile-sidebar   .submenu-toggle svg {
  width: var(--sb-icon);
  height: var(--sb-icon);
}

/* Nudge the overall vertical spacing down (overrides Tailwind space-y-1) */
.portal-shell nav#sidebar-desktop > :not([hidden]) ~ :not([hidden]),
.portal-shell nav#mobile-sidebar   > :not([hidden]) ~ :not([hidden]) {
  margin-top: .125rem !important; /* 2px */
}

/* Keep active/hover styles intact but compact */
.portal-shell .sidebar-link:hover    { background-color: #3741511A; } /* subtle hover */
.portal-shell .sidebar-link.bg-gray-700 { padding-top: var(--sb-pad-y); padding-bottom: var(--sb-pad-y); }


/* =========================
   Fire Track Pro – Compact Sidebar
   Scope: #portal-root (portal pages)
   ========================= */
#portal-root {
  --sb-width: 14rem;        /* 224px (smaller than Tailwind w-64) */
  --sb-font: 0.875rem;      /* 14px base for items */
  --sb-font-sub: 0.8125rem; /* 13px for submenu items */
  --sb-item-py: .4rem;      /* vertical padding */
  --sb-item-px: .55rem;     /* horizontal padding */
  --sb-gap: .5rem;          /* icon/label gap */
  --sb-icon: 18px;          /* feather icon size */
  --sb-radius: 12px;        /* rounded buttons/links */
  --sb-bg: #0f172a;         /* slate-900 */
  --sb-hover: rgba(255,255,255,.06);
  --sb-active: rgba(99,102,241,.18); /* indigo-500 on dark */
  --sb-border: rgba(148,163,184,.15); /* slate-400/15 */
  --sb-muted: #cbd5e1;      /* slate-300 */
  --sb-strong: #e5e7eb;     /* slate-200 */
}

/* Make the rail a bit narrower (overrides w-64) */
#portal-root #sidebar-desktop,
#portal-root #mobile-sidebar {
  width: var(--sb-width) !important;
  background: var(--sb-bg);
}

/* Item sizing + rounding */
#portal-root .sidebar-link,
#portal-root .submenu-toggle {
  padding: var(--sb-item-py) var(--sb-item-px);
  gap: var(--sb-gap);
  font-size: var(--sb-font);
  border-radius: var(--sb-radius);
  color: var(--sb-strong);
  line-height: 1.1;
}

/* Icons: consistent size + slightly muted */
#portal-root .sidebar-link svg,
#portal-root .submenu-toggle svg {
  width: var(--sb-icon);
  height: var(--sb-icon);
  opacity: .9;
}

/* Hover / focus */
#portal-root .sidebar-link:hover,
#portal-root .submenu-toggle:hover {
  background: var(--sb-hover);
}

/* Active (your JS adds bg-gray-700; make that look nicer) */
#portal-root .sidebar-link.bg-gray-700,
#portal-root .sidebar-link.text-white.bg-gray-700 {
  background: var(--sb-active) !important;
  color: #fff !important;
}

/* Left accent bar for active links */
#portal-root .sidebar-link.bg-gray-700,
#portal-root .submenu .sidebar-link.bg-gray-600 {
  position: relative;
}
#portal-root .sidebar-link.bg-gray-700::before,
#portal-root .submenu .sidebar-link.bg-gray-600::before {
  content: "";
  position: absolute;
  left: -12px;
  top: 14%;
  height: 72%;
  width: 3px;
  background: #60a5fa; /* blue-400 */
  border-radius: 2px;
}

/* Submenu: tighter, indented, with a faint guide */
#portal-root .submenu {
  padding-left: .5rem !important;
  margin-left: .25rem;
  border-left: 1px dashed var(--sb-border);
}
#portal-root .submenu .sidebar-link {
  font-size: var(--sb-font-sub);
  padding-top: calc(var(--sb-item-py) - 2px);
  padding-bottom: calc(var(--sb-item-py) - 2px);
  color: var(--sb-muted);
}
#portal-root .submenu .sidebar-link:hover {
  color: #fff;
}

/* Rotate the chevron when submenu is open (no JS change needed) */
#portal-root .submenu-toggle svg:last-child { transition: transform .2s ease; }
#portal-root .submenu-group:has(.submenu:not(.hidden)) .submenu-toggle svg:last-child {
  transform: rotate(90deg);
}

/* Tighten vertical spacing between items (overrides space-y-1) */
#portal-root #sidebar-desktop > :not([hidden]) ~ :not([hidden]),
#portal-root #mobile-sidebar   > :not([hidden]) ~ :not([hidden]) {
  margin-top: .125rem !important; /* 2px */
}

/* Slim nice scrollbar inside nav drawers */
#portal-root #mobile-sidebar,
#portal-root #sidebar-desktop {
  scrollbar-width: thin;
  scrollbar-color: #475569 transparent;
}
#portal-root #mobile-sidebar::-webkit-scrollbar,
#portal-root #sidebar-desktop::-webkit-scrollbar { width: 8px; }
#portal-root #mobile-sidebar::-webkit-scrollbar-thumb,
#portal-root #sidebar-desktop::-webkit-scrollbar-thumb {
  background: #475569; border-radius: 6px;
}

/* Make header brand area breathe a bit less */
#portal-root #sidebar-desktop .mb-8 { margin-bottom: 1rem !important; }

/* Keep buttons/inputs rounded by default in the portal */
#portal-root :where(button,input,select,textarea):not([class*="rounded-"]) {
  border-radius: var(--sb-radius);
}
/* ===== Compact++ sidebar (smaller everything) ===== */
#portal-root{
  --sb-width: 12rem;        /* 192px */
  --sb-font: .8125rem;      /* 13px */
  --sb-font-sub: .75rem;    /* 12px */
  --sb-item-py: .30rem;     /* tighter vertical */
  --sb-item-px: .45rem;     /* tighter horizontal */
  --sb-gap: .4rem;          /* tighter icon gap */
  --sb-icon: 16px;          /* smaller icons */
  --sb-radius: 10px;        /* slightly smaller rounding */
}

/* apply width to both sidebars */
#portal-root #sidebar-desktop,
#portal-root #mobile-sidebar { width: var(--sb-width) !important; }

/* items */
#portal-root .sidebar-link,
#portal-root .submenu-toggle{
  padding: var(--sb-item-py) var(--sb-item-px);
  gap: var(--sb-gap);
  font-size: var(--sb-font);
  border-radius: var(--sb-radius);
  line-height: 1.05;
}

/* icons */
#portal-root .sidebar-link svg,
#portal-root .submenu-toggle svg{
  width: var(--sb-icon);
  height: var(--sb-icon);
}

/* submenu tighter + smaller */
#portal-root .submenu{
  padding-left: .4rem !important;
  margin-left: .15rem;
}
#portal-root .submenu .sidebar-link{
  font-size: var(--sb-font-sub);
  padding-top: calc(var(--sb-item-py) - 3px);
  padding-bottom: calc(var(--sb-item-py) - 3px);
}

/* brand header smaller */
#portal-root #sidebar-desktop > .flex.items-center img{ width: 32px; height: 32px; }
#portal-root #sidebar-desktop > .flex.items-center span{ font-size: .95rem !important; }
#portal-root #sidebar-desktop .mb-8{ margin-bottom: .75rem !important; }

/* slimmer active accent */
#portal-root .sidebar-link.bg-gray-700::before,
#portal-root .submenu .sidebar-link.bg-gray-600::before{
  left: -10px; width: 2px; border-radius: 2px;
}

/* reduce vertical gaps (overrides space-y-1) */
#portal-root #sidebar-desktop > :not([hidden]) ~ :not([hidden]),
#portal-root #mobile-sidebar   > :not([hidden]) ~ :not([hidden]){
  margin-top: .1rem !important;
}

/* slimmer scrollbars */
#portal-root #mobile-sidebar,
#portal-root #sidebar-desktop{ scrollbar-width: thin; }
#portal-root #mobile-sidebar::-webkit-scrollbar,
#portal-root #sidebar-desktop::-webkit-scrollbar{ width: 6px; }
