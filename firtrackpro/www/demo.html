{% extends "firtrackpro/www/templates/base_template.html" %}
{% block navbar %}{% endblock %}
{% block title %}Request a Demo — FireTrack Pro{% endblock %}

{% block page_content %}
<div class="w-full min-h-screen flex items-center justify-center bg-[#FFFFFF] py-10">
  <div class="bg-white rounded-3xl shadow-xl p-8 sm:p-12 max-w-xl w-full mx-2 border border-[#D32F2F]/20">
    <div class="flex flex-col items-center text-center mb-8">
      <img src="/assets/firtrackpro/images/firetrack-logo.png" alt="FireTrack Pro Logo" class="w-16 h-16 mb-3 mx-auto">
      <h1 class="text-2xl sm:text-3xl font-extrabold text-[#222B31] mb-2">Request a Live Demo</h1>
      <div class="text-[#7A868C] mb-2 text-base sm:text-lg">
        See FireTrack Pro in action. No spam, no pressure.
      </div>
    </div>
    <form id="demo-request-form" class="space-y-5" autocomplete="off">
      <div>
        <label for="name" class="block font-semibold mb-1 text-[#222B31]">Your Name</label>
        <input required id="name" name="name" type="text" class="w-full px-4 py-3 rounded-xl border border-[#7A868C] bg-white text-[#222B31] focus:ring-2 focus:ring-[#D32F2F]/40 font-medium transition" autocomplete="name">
      </div>
      <div>
        <label for="company" class="block font-semibold mb-1 text-[#222B31]">Company/Organisation</label>
        <input required id="company" name="company" type="text" class="w-full px-4 py-3 rounded-xl border border-[#7A868C] bg-white text-[#222B31] focus:ring-2 focus:ring-[#D32F2F]/40 font-medium transition" autocomplete="organization">
      </div>
      <div>
        <label for="email" class="block font-semibold mb-1 text-[#222B31]">Email</label>
        <input required id="email" name="email" type="email" class="w-full px-4 py-3 rounded-xl border border-[#7A868C] bg-white text-[#222B31] focus:ring-2 focus:ring-[#D32F2F]/40 font-medium transition" autocomplete="email">
      </div>
      <div>
        <label for="phone" class="block font-semibold mb-1 text-[#222B31]">Phone <span class="font-normal text-[#7A868C]">(optional)</span></label>
        <input id="phone" name="phone" type="tel" class="w-full px-4 py-3 rounded-xl border border-[#7A868C] bg-white text-[#222B31] focus:ring-2 focus:ring-[#D32F2F]/40 font-medium transition" autocomplete="tel">
      </div>
      <div>
        <label for="sites" class="block font-semibold mb-1 text-[#222B31]">How many sites/assets do you manage?</label>
        <input id="sites" name="sites" type="text" class="w-full px-4 py-3 rounded-xl border border-[#7A868C] bg-white text-[#222B31] focus:ring-2 focus:ring-[#D32F2F]/40 font-medium transition" placeholder="e.g. 12 buildings, 600+ assets">
      </div>
      <div>
        <label for="notes" class="block font-semibold mb-1 text-[#222B31]">Message/Notes <span class="font-normal text-[#7A868C]">(optional)</span></label>
        <textarea id="notes" name="notes" rows="3" class="w-full px-4 py-3 rounded-xl border border-[#7A868C] bg-white text-[#222B31] focus:ring-2 focus:ring-[#D32F2F]/40 font-medium transition"></textarea>
      </div>
      <button type="submit" class="w-full mt-2 py-3 px-8 rounded-xl bg-[#D32F2F] text-white text-lg font-bold shadow hover:bg-[#a1241a] hover:scale-105 transition">
        Request Demo
      </button>
    </form>
    <div id="demo-confirm" class="hidden mt-8 text-[#2ECC40] text-lg font-semibold text-center">
      <i data-feather="check-circle" class="inline-block align-middle w-6 h-6 mr-1"></i>
      Request received! We’ll contact you soon.
    </div>
  </div>
</div>
{% endblock %}

{% block footer_scripts %}
{{ super() }}
<script>
document.addEventListener('DOMContentLoaded', function () {
  if (window.feather) feather.replace();
  const form = document.getElementById('demo-request-form');
  const confirm = document.getElementById('demo-confirm');
  form.addEventListener('submit', function (e) {
    e.preventDefault();
    const data = Object.fromEntries(new FormData(form).entries());
    fetch('/api/method/firtrackpro.api.public.request_demo', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-Frappe-CSRF-Token': window.csrf_token || ''
      },
      body: JSON.stringify(data)
    })
    .then(resp => resp.ok ? resp.json() : Promise.reject())
    .then(() => {
      form.classList.add('hidden');
      confirm.classList.remove('hidden');
      if (window.showToast) showToast('Demo request sent!', 'success');
    })
    .catch(() => {
      if (window.showToast) showToast('Error sending request. Please try again.', 'error');
    });
  });
});
</script>
{% endblock %}
