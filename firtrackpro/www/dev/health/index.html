{% extends "firtrackpro/www/templates/portal_template.html" %}
{% block title %}WWW Health Check{% endblock %}
{% block page_content %}
<div class="w-full max-w-6xl mx-auto px-4 py-6 space-y-6">
  <div class="text-2xl font-bold">WWW Pages Health</div>
  {% if missing_indexes and missing_indexes|length %}
  <div class="p-3 rounded-md bg-red-50 border border-red-200 text-red-700 text-sm">
    Missing index.html in:
    <ul class="list-disc ml-5">
      {% for d in missing_indexes %}<li>{{ d }}</li>{% endfor %}
    </ul>
  </div>
  {% else %}
  <div class="p-3 rounded-md bg-green-50 border border-green-200 text-green-800 text-sm">
    No missing index.html pages detected.
  </div>
  {% endif %}
  <table class="w-full text-sm">
    <thead>
      <tr class="text-left border-b">
        <th class="py-2">URL</th>
        <th class="py-2">Path</th>
        <th class="py-2">Type</th>
        <th class="py-2">Issues</th>
      </tr>
    </thead>
    <tbody>
      {% for p in pages %}
      <tr class="border-b">
        <td class="py-2"><a class="text-blue-600 hover:underline" href="{{ p.url }}">{{ p.url }}</a></td>
        <td class="py-2 text-gray-500">{{ p.path }}</td>
        <td class="py-2">{{ p.type }}</td>
        <td class="py-2">
          {% if p.issues and p.issues|length %}
          <span class="px-2 py-1 rounded bg-red-100 text-red-800">{{ p.issues|join(", ") }}</span>
          {% else %}
          <span class="px-2 py-1 rounded bg-green-100 text-green-800">ok</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
