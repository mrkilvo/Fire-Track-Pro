{% extends "firtrackpro/www/templates/portal_template.html" %}
{% block title %}Dev • Pages{% endblock %}
{% block page_content %}
<div class="w-full max-w-6xl mx-auto px-4 py-6 space-y-4">
  <div class="flex items-center justify-between">
    <div class="text-2xl font-bold">Public Routes</div>
    <input id="q" type="search" placeholder="Filter…" class="px-3 py-2 border rounded-lg w-64">
  </div>
  <div class="text-sm text-gray-600">Showing <span id="count">{{ pages|length }}</span> routes</div>
  <ul id="list" class="divide-y">
    {% for p in pages %}
      <li class="py-2 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <a href="{{ p.url }}" class="text-blue-600 hover:underline">{{ p.url }}</a>
          <span class="text-[11px] px-2 py-0.5 rounded bg-gray-100 border">{{ p.types|join(", ") }}</span>
        </div>
        <div class="text-xs text-gray-500 truncate max-w-[60%]">{{ p.paths|join(" • ") }}</div>
      </li>
    {% endfor %}
  </ul>
</div>
<script>
document.addEventListener('DOMContentLoaded',function(){
  const q=document.getElementById('q'),list=document.getElementById('list'),cnt=document.getElementById('count');
  const rows=[...list.children].map(li=>({li,txt:li.innerText.toLowerCase()}));
  q.addEventListener('input',()=>{const s=q.value.toLowerCase();let n=0;rows.forEach(r=>{const show=!s||r.txt.includes(s);r.li.style.display=show?'':'none';if(show)n++});cnt.textContent=n});
});
</script>
{% endblock %}
